<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.haier.m.dao.shop.read.SgStoreProductsAttributeReadDao">
	<resultMap id="SgStoreProductsAttributeResult" type="com.haier.m.entity.item.SgStoreProductsAttribute">
			<result property="id" column="id" />
			<result property="productId" column="product_id" />
			<result property="sku" column="sku" />
			<result property="skku" column="skku" />
			<result property="storeId" column="store_id" />
			<result property="attrIds" column="attr_ids" />
			<result property="attrValueIds" column="attr_value_ids" />
			<result property="pic" column="pic" />
			<result property="price" column="price" />
	</resultMap>
	
	<select id="getSgStoreAttributeByProductId" parameterType="java.util.Map" resultMap="SgStoreProductsAttributeResult">
		SELECT
		id,product_id,sku,skku,store_id,attr_ids,attr_value_ids,pic,price
		FROM `sg_store_products_attribute`
		WHERE on_sale = 1 AND is_delete != 1
		AND product_id = #{productId} AND store_id = #{storeId}
	</select>
	<select id="getSgStoreAttributeInSet" parameterType="java.util.Map" resultMap="SgStoreProductsAttributeResult">
		SELECT
		id,product_id,sku,skku,store_id,attr_ids,attr_value_ids,pic,price
		FROM `sg_store_products_attribute`
		WHERE on_sale = 1 AND is_delete != 1
		AND product_id = #{productId} AND store_id = #{storeId}
		AND FIND_IN_SET(#{value},attr_value_ids);
	</select>
	<select id="isShowAttr" parameterType="java.util.Map" resultType="java.lang.Integer">
		SELECT count(*)
		FROM `sg_store_products_attribute`
		WHERE on_sale = 1 AND is_delete != 1
		AND store_id = #{storeId} AND product_id = #{productId}
	</select>
	<select id="getAttrBySkku" parameterType="java.util.Map" resultMap="SgStoreProductsAttributeResult">
		SELECT *
		FROM `sg_store_products_attribute`
		WHERE on_sale = 1 AND is_delete != 1
		AND skku = #{skku} AND store_id = #{storeId}
	</select>
</mapper>